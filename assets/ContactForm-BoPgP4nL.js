import{u as $,r as l,d as c,e as F,o as d,c as v,b as t,w as g,v as C,f as p,t as L,g as T,a as R,h as U,i as j,j as H}from"./index-D1GV-aA3.js";const Y={class:"wrapper_card"},z={class:"form"},A={class:"contact_input"},G=t("label",{class:"contact_label"},"First name",-1),J={key:0,class:"error"},K={class:"contact_input"},O=t("label",{class:"contact_label"},"Last name",-1),Q={key:0,class:"error"},W={class:"contact_input"},X=t("label",{class:"contact_label"},"Phone number",-1),Z={key:0,class:"error"},ee={key:1,class:"error"},te={class:"form_buttons"},ae=t("button",{class:"form_btn cancel_btn"},"Cancel",-1),se={__name:"ContactForm",props:{contactId:{type:Number,required:!1}},setup(x){const f=x,E=j(),m=$(),n=l(""),r=l(""),o=l(""),_=l(!1),h=l(!1),b=l(!1),u=l(""),i=c(()=>m.getContactById(f.contactId)),I=c(()=>m.getContactByPhone(o.value)),y=c(()=>!!(!n.value&&_.value)),S=c(()=>!!(!r.value&&h.value)),k=c(()=>!!(!o.value&&b.value)),M=c(()=>y.value||S.value||k.value||u.value),w=()=>{const a=new Date,e=a.getDate().toString().padStart(2,"0")+"-"+(a.getMonth()+1).toString().padStart(2,"0")+"-"+a.getFullYear(),N=a.getHours()+":"+a.getMinutes().toString().padStart(2,"0")+":"+a.getSeconds().toString().padStart(2,"0");return e+" "+N},V=()=>{m.editContact({...i.value,firstName:n.value,lastName:r.value,phoneNumber:o.value})},B=()=>{n.value="",r.value="",o.value="",u.value=""},D=()=>{const a=Math.floor(Math.random()*1e7);m.createContact({id:a,firstName:n.value,lastName:r.value,phoneNumber:o.value,date:w()})},P=()=>{_.value=!0,h.value=!0,b.value=!0;const a=I.value;a&&a.id!==f.contactId&&(u.value=`Error: Phone number ${o.value} already exists!`),M.value||(f.contactId?V():D(),B(),E.push({name:"list"}))},q=()=>{u.value=!1};return F(()=>{i.value&&(n.value=i.value.firstName,r.value=i.value.lastName,o.value=i.value.phoneNumber)}),(a,e)=>{const N=H("RouterLink");return d(),v("div",Y,[t("form",z,[t("div",A,[G,g(t("input",{class:"input",type:"text",placeholder:"enter first name...","onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),onBlur:e[1]||(e[1]=s=>_.value=!0)},null,544),[[C,n.value]]),y.value?(d(),v("p",J,"This field is required")):p("",!0)]),t("div",K,[O,g(t("input",{class:"input",type:"text",placeholder:"enter lastname...","onUpdate:modelValue":e[2]||(e[2]=s=>r.value=s),onBlur:e[3]||(e[3]=s=>h.value=!0)},null,544),[[C,r.value]]),S.value?(d(),v("p",Q,"This field is required")):p("",!0)]),t("div",W,[X,g(t("input",{class:"input",type:"tel",placeholder:"+380...","onUpdate:modelValue":e[4]||(e[4]=s=>o.value=s),onBlur:e[5]||(e[5]=s=>b.value=!0),onInput:q},null,544),[[C,o.value]]),u.value?(d(),v("p",Z,L(u.value),1)):p("",!0),k.value?(d(),v("p",ee,"This field is required")):p("",!0)])]),t("div",te,[t("button",{class:"form_btn confirm_btn",onClick:T(P,["prevent"])}," Confirm "),t("button",{class:"form_btn clear_btn",onClick:T(B,["prevent"])},"Clear"),R(N,{to:{name:"list"}},{default:U(()=>[ae]),_:1})])])}}};export{se as _};
